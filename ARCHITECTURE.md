# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –û–±–∑–æ—Ä

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π serverless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI Assistant API –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram User  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Telegram Bot API‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ Webhook
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Vercel Serverless          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ   api/webhook.py        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   (HTTP Handler)        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ              ‚îÇ                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Bot Handlers Layer     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - main.py              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - search.py            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - company.py           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - export.py            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - external.py          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ              ‚îÇ                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Services Layer         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - assistant.py         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - mcp_dadata.py        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - court.py             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - procurement.py       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  - pdf_export.py        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ                   ‚îÇ
     ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  OpenAI     ‚îÇ   ‚îÇ MCP DaData   ‚îÇ
‚îÇ  Assistant  ‚îÇ   ‚îÇ   (Facts)    ‚îÇ
‚îÇ             ‚îÇ   ‚îÇ              ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ ‚îÇ Vector  ‚îÇ ‚îÇ
‚îÇ ‚îÇ Store   ‚îÇ ‚îÇ
‚îÇ ‚îÇ(Memory) ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. HTTP Handler (api/webhook.py)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Vercel serverless function

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏–µ–º webhook –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç Telegram
- –ü–∞—Ä—Å–∏–Ω–≥ JSON payload
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
- –í–æ–∑–≤—Ä–∞—Ç HTTP –æ—Ç–≤–µ—Ç–æ–≤

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Flask-style HTTP handler –¥–ª—è Vercel

### 2. Handlers Layer (bot/handlers/)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### main.py
- `/start` –∫–æ–º–∞–Ω–¥–∞
- `/help` –∫–æ–º–∞–Ω–¥–∞
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

#### search.py
- –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù
- –ü–æ–∏—Å–∫ –ø–æ –û–ì–†–ù
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞
- Conversation state management

#### company.py
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Assistant

#### export.py
- –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞ –≤ PDF
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞

#### external.py
- –°—É–¥–µ–±–Ω—ã–µ –¥–µ–ª–∞ (sudrf.ru)
- –ì–æ—Å–∑–∞–∫—É–ø–∫–∏ (zakupki.gov.ru)
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 3. Services Layer (bot/services/)

#### assistant.py - OpenAI Assistant Service

**–ö–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã**

–§—É–Ω–∫—Ü–∏–∏:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ (threads) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Assistant
- –†–∞–±–æ—Ç–∞ —Å Vector Store
- Retrieval-Augmented Generation (RAG)

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- get_or_create_thread(user_id) -> thread_id
- store_in_vector_store(user_id, content, metadata)
- query_company(user_id, query, company_data) -> formatted_response
- format_screen(user_id, screen_type, company_data) -> formatted_screen
```

#### mcp_dadata.py - MCP DaData Integration

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**

–ü—Ä–∞–≤–∏–ª–∞:
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –¢–û–õ–¨–ö–û –∏–∑ DaData API
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å "–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö" –¥–ª—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π
- ‚ùå –ù–∏–∫–∞–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- find_by_inn(inn) -> company_data
- find_by_ogrn(ogrn) -> company_data
- get_company_finances(inn) -> finance_data
- _normalize_company_data(raw_data) -> normalized_data
```

#### court.py & procurement.py

**Best-effort –ø–∞—Ä—Å–µ—Ä—ã –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π
- –ß–µ—Å—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö API

#### pdf_export.py

**PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**

–§—É–Ω–∫—Ü–∏–∏:
- –≠–∫—Å–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∫–æ–º–ø–∞–Ω–∏–∏
- iOS-style —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. Utilities (bot/utils/)

#### keyboards.py
iOS-style inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ú–µ–Ω—é –∫–æ–º–ø–∞–Ω–∏–∏
- –ü–æ–¥–º–µ–Ω—é –∏—Å—Ç–æ—Ä–∏–∏
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç

#### formatters.py
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥
- –≠–º–æ–¥–∑–∏ –∏–∫–æ–Ω–∫–∏
- –¢–∞–±–ª–∏—Ü—ã –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏

## –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å (Vector Store)

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
   - –ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–∏—Å–∫–∞
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

2. **–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã**
   - –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã
   - –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–π
   - –°–≤—è–∑—å —Å –ò–ù–ù/–û–ì–†–ù

3. **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ —ç–∫—Ä–∞–Ω—ã
   - –ò—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
   - –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

```python
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Vector Store –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
cached = assistant_service.search_vector_store(query)
if cached:
    return cached

# 2. –ó–∞–ø—Ä–æ—Å –∫ MCP DaData
company_data = mcp_dadata_service.find_by_inn(inn)

# 3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Assistant (—Å RAG)
response = assistant_service.query_company(user_id, query, company_data)

# 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Vector Store
assistant_service.store_in_vector_store(user_id, response, metadata)
```

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–∏—Å–∫ –ø–æ –ò–ù–ù

```
User -> [–ò–ù–ù] -> Handler
                    ‚Üì
              Validate format
                    ‚Üì
         Check Vector Store ‚îÄ‚Üí Cache hit? ‚Üí Return cached
                    ‚Üì Cache miss
         Query MCP DaData
                    ‚Üì
         Get company data
                    ‚Üì
    Format via OpenAI Assistant
         (uses Vector Store for context)
                    ‚Üì
         Store in Vector Store
                    ‚Üì
    Send formatted response to User
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞

```
User -> [–ö–Ω–æ–ø–∫–∞: –§–∏–Ω–∞–Ω—Å—ã] -> Handler
                                ‚Üì
                    Get company from context/MCP
                                ‚Üì
                    Check Vector Store for similar query
                                ‚Üì
            Send to OpenAI Assistant with instructions:
            - Screen type: "finances"
            - Company data from MCP
            - Retrieve relevant context from Vector Store
                                ‚Üì
                    Assistant generates formatted screen
                                ‚Üì
                    Store formatted screen in Vector Store
                                ‚Üì
            Send to User with navigation keyboard
```

## Serverless –Ω–∞ Vercel

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è

```
TelegramBot.Webhook/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ webhook.py          # Serverless function endpoint
‚îú‚îÄ‚îÄ bot/                    # Application code
‚îú‚îÄ‚îÄ vercel.json            # Vercel configuration
‚îî‚îÄ‚îÄ requirements.txt       # Python dependencies
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–í—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å**
   - Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –Ω–∞ `/api/webhook`
   - Vercel –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–∞ `api/webhook.py`

2. **–•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç**
   - Vercel —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Application

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞**
   - –ü–∞—Ä—Å–∏–Ω–≥ Update –æ—Ç Telegram
   - –í—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö handlers
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞

4. **–¢–µ–ø–ª—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
   - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—ã—Å—Ç—Ä–µ–µ
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∂–∏–≤–µ—Ç ~5 –º–∏–Ω—É—Ç

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Vercel

- ‚è± Timeout: 10 —Å–µ–∫—É–Ω–¥ (Hobby), 60 —Å–µ–∫—É–Ω–¥ (Pro)
- üíæ Memory: 1024 MB
- üì¶ Deployment size: 250 MB

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

```env
# ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å
.env

# ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel Environment Variables
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí Environment Variables
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –ò–ù–ù: 10 –∏–ª–∏ 12 —Ü–∏—Ñ—Ä
if not re.match(r'^\d{10}$|^\d{12}$', inn):
    return "Invalid INN"

# –û–ì–†–ù: 13 –∏–ª–∏ 15 —Ü–∏—Ñ—Ä
if not re.match(r'^\d{13}$|^\d{15}$', ogrn):
    return "Invalid OGRN"
```

### HTTPS

- Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç SSL
- Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è webhooks

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ Vercel

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **Vector Store** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
2. **–õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - telegram-python-bot async/await

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏ Vercel

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ (4xx, 5xx)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

logger = logging.getLogger(__name__)
logger.info("User request processed")
logger.error("Error details", exc_info=True)
```

–ü—Ä–æ—Å–º–æ—Ç—Ä:
```bash
vercel logs
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

1. **–°–æ–∑–¥–∞—Ç—å handler** –≤ `bot/handlers/`
2. **–î–æ–±–∞–≤–∏—Ç—å callback query handler** –≤ `api/webhook.py`
3. **–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É** –≤ `bot/utils/keyboards.py`
4. **–û–±–Ω–æ–≤–∏—Ç—å Assistant instructions** –≤ `setup.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

1. **–°–æ–∑–¥–∞—Ç—å service** –≤ `bot/services/`
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ handlers**
3. **–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Vector Store
4. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python –ø–∞–∫–µ—Ç—ã

- `python-telegram-bot` - Telegram Bot API
- `openai` - OpenAI API (Assistant, Vector Store)
- `requests` - HTTP –∑–∞–ø—Ä–æ—Å—ã
- `reportlab` - PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- `beautifulsoup4` - HTML –ø–∞—Ä—Å–∏–Ω–≥
- `python-dotenv` - Environment variables

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

- **Telegram Bot API** - –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **OpenAI API** - Pay-as-you-go
- **DaData API** - Freemium
- **Vercel** - Freemium

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö:

- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - serverless –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ø–∞–º—è—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å** - —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã –∏–∑ MCP DaData
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–µ–ø–ª–æ—è** - git push = –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
